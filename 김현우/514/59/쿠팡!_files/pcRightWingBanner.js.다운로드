!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require(void 0),require(void 0));else if("function"==typeof define&&define.amd)define(["jquery","lodash"],e);else{var n="object"==typeof exports?e(require("jquery"),require("lodash")):e(t.jQuery,t._);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,
e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.adLoggingUris,n=void 0===e?{}:e,o=t.adLoggingParams,i=void 0===o?{}:o,r=t.contentsLinkUrl,c={targetUrl:r,trAid:i.bannerId,trCid:i.trCid,adCid:i.adId};return{adLogging:n,webLogging:{impression:{meta:h.impression,data:s({},f.impression,c)},click:{meta:h.click,data:s({},f.click,c)}}}}function r(){var t=(0,a["default"])("#side-bar .cmg-promotion-wing-banner");
0!==t.length&&t.each(function(){var t=(0,a["default"])(this),e=t.data("linkUrl"),n=t.data("loggingUris"),o=t.data("loggingParams"),r=i({adLoggingUris:n,adLoggingParams:o,contentsLinkUrl:e}),c=s({target:t,contentsLinkUrl:e},r),l=new u["default"](c);l.init()})}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=n(1),a=o(c),l=n(2),u=o(l),h={impression:{schemaId:3120,schemaVersion:1},
click:{schemaId:3121,schemaVersion:1}},f={impression:{logCategory:"impression",logType:"impression",domain:"home",pageName:"home",viewType:"CMG_AD_BANNER",eventName:"impression_ad_banner"},click:{logCategory:"event",logType:"click",domain:"home",pageName:"home",eventName:"click_line_banner"}};t.exports=r},function(e,n){e.exports=t},function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function r(t,
e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var c=n(1),a=o(c),l=
n(3),u=o(l),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.target,s=n.contentsLinkUrl,c=n.adLogging,l=n.webLogging,h=n.clickTarget;i(this,e);var f=r(this,t.call(this));f.$container=(0,a["default"])(o),f.inited=!1,f.logged={},h&&h instanceof a["default"]?f.$clickTarget=h:f.$clickTarget=f.$container;var d=u["default"].getLogSender({adComponent:f,adLogging:c,webLogging:l});return f.on("impression",function(){return d("impression")}),f.on("viewImpression",
function(){return d("viewImpression")}),f.on("click",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"click"===t&&s&&"_blank"===e?(d("click"),window.open(s)):(d("click"),"click"===t&&s&&(window.location.href=s))}),f}return s(e,t),e.prototype.init=function(){var e=this;if(!(this.inited||!this.$container instanceof a["default"])){t.prototype.init.call(this);var n=function t(n){0!==e.$container.has(n.currentTarget).length&&(n.preventDefault(),n.stopPropagation(),e.emit("click",
n.type,n.currentTarget.target),e.$clickTarget.off("click middleclick",".banner-link",t))};this.$clickTarget.on("click middleclick",".banner-link",n),u["default"].setViewImpressionEvent(function(){e.emit("viewImpression")},{target:this.$container.get(0),threshold:.5,timeout:1E3}),this.emit("impression")}},e}(u["default"]);e["default"]=h},function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");
}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){var e=h["default"].Deferred();
try{if("string"!=typeof t)return void e.resolve(!1);var n=new Image;n.onload=function(){e.resolve(!0)},n.onerror=function(){e.resolve(!1)},n.src=t}catch(t){e.resolve(!1)}return e.promise()}function a(t){var e=h["default"].Deferred();try{"object"===("undefined"==typeof t?"undefined":l(t))&&window.CoupangWebLog&&"function"==typeof window.CoupangWebLog.submit?(window.CoupangWebLog.submit(t),e.resolve(!0)):e.resolve(!1)}catch(t){e.resolve(!1)}return e.promise()}e.__esModule=!0;var l="function"==typeof Symbol&&
"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=n(1),h=o(u),f=n(4),d=o(f),g=n(5),p=o(g);n(6);var v=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.$container=null,n.inited=!1,n.isDev=!1,"local.coupang.com"===document.location.hostname&&(n.isDev=!0),n}return s(e,t),e.prototype.init=function(){var t=this;this.$clickTarget&&this.$clickTarget instanceof
h["default"]&&this.$clickTarget.on("mousedown",function(e){t.$clickTarget.one("mouseup",function(t){if(2===e.which&&e.target===t.target){var n=h["default"].event.fix(t);n.type="middleclick",(0,h["default"])(t.target).trigger(n)}})}),this.$container&&this.$container instanceof h["default"]&&this.$container.on("mousedown",function(e){t.$container.one("mouseup",function(t){if(2===e.which&&e.target===t.target){var n=h["default"].event.fix(t);n.type="middleclick",(0,h["default"])(t.target).trigger(n)}})}),
Object.defineProperty(this,"inited",{writable:!1,configurable:!1,enumerable:!1,value:!0})},e.sendLog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.adLoggingData,n=t.webLoggingData;return h["default"].when(c(e),a(n)).then(function(t,e){return{adLogging:t,webLogging:e}})},e.getLogSender=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.adComponent,o=t.adLogging,i=t.webLogging;return function(t){return n.inited===!1||n.logged[t]?h["default"].Deferred().resolve({}):
e.sendLog({adLoggingData:o[t],webLoggingData:i[t]}).then(function(e){return Object.defineProperty(n.logged,t,{writable:!1,configurable:!1,value:!0}),e})}},e.setViewImpressionEvent=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,o=e.root,i=void 0===o?null:o,r=e.margin,s=void 0===r?0:r,c=e.threshold,a=void 0===c?.5:c,l=e.timeout,u=void 0===l?1E3:l;if("function"==typeof t&&n){var h=new IntersectionObserver(function(e,n){e.forEach(function(e){var o=e.isIntersecting&&
e.intersectionRatio>=a;if(u>0){var i=e.target.getAttribute("data-view-timeout");if(o&&!i){var r=setTimeout(function(){e.target.removeAttribute("data-view-timeout"),h.unobserve(e.target),t(e,n)},u);e.target.setAttribute("data-view-timeout",r)}else!o&&i&&(clearTimeout(parseInt(i,10)),e.target.removeAttribute("data-view-timeout"))}else o&&(h.unobserve(e.target),t(e,n))})},{root:i,rootMargin:s+"px",threshold:a});return h.observe(n),h}},e.setScrollReachEvent=function(t){var e=arguments.length>1&&void 0!==
arguments[1]?arguments[1]:{},n=e.target,o=e.once,i=void 0!==o&&o,r=e.throttle,s=void 0===r?250:r;if("function"==typeof t&&n){var c=(0,h["default"])(window),a=(0,h["default"])(n),l=d["default"].throttle(function(){if(!a.is(":hidden")){var e=a.offset().top,n=a.innerHeight(),o=c.scrollTop(),r=c.height(),s=e<o+r&&e+n>o;i&&s?(c.off("scroll.cmgComponentWindowScrollSpy",l),t(!0)):i||t(s)}},s);c.on("scroll.cmgComponentWindowScrollSpy",l).trigger("scroll")}},e}(p["default"]);e["default"]=v},function(t,n){t.exports=
e},function(t,e){function n(){}t.exports=n,n.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(t,e,n){this.callbacks=this.callbacks||{};var o=3===arguments.length,i=o?arguments[1]:void 0,r=o?arguments[2]:arguments[1];return r._groupName=i,(this.callbacks[t]=this.callbacks[t]||[]).push(r),this},e.once=function(t,e,n){function o(){i.off(t,o),c.apply(this,arguments)}var i=this,r=3===arguments.length,s=r?arguments[1]:void 0,c=r?arguments[2]:arguments[1];return this.on(t,s,o),this},
e.releaseGroup=function(t){this.callbacks=this.callbacks||{};var e,n,o,i;for(e in this.callbacks)for(i=this.callbacks[e],n=0,o=i.length;n<o;n++)i[n]._groupName===t&&(i.splice(n,1),n--,o--);return this},e.off=function(t,e){this.callbacks=this.callbacks||{};var n,o=this.callbacks[t];return o?1===arguments.length?(delete this.callbacks[t],this):(n=o.indexOf(e),o.splice(n,1),0===o.length&&delete this.callbacks[t],this):this},e.emit=function(t){this.callbacks=this.callbacks||{};var e,n,o,i=[].slice.call(arguments,
1),r=this.callbacks[t],s=this.getWildcardCallbacks(t);if(r)for(o=r.slice(),e=0,n=o.length;e<n&&o[e];++e)o[e].apply(this,i);if(s)for(n=s.length,o=s.slice(),e=0,n=o.length;e<n&&o[e];++e)o[e].apply(this,[t].concat(i));return this},e.getWildcardCallbacks=function(t){this.callbacks=this.callbacks||{};var e,n,o=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[0].length)===n[0])&&(o=o.concat(this.callbacks[e]));return o}},n.mixin(n)},function(t,e){var n="function"==typeof Symbol&&
"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||l(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;n?this.intersectionRatio=
Number((i/n).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function e(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),
this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function o(){return window.performance&&performance.now&&performance.now()}function i(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function r(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,
n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function c(t,e){var n=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),s=r-i,c=o-n;return s>=0&&c>=0&&{top:n,bottom:o,left:i,right:r,width:s,height:c}}function a(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):l()}function l(){return{top:0,
bottom:0,left:0,right:0,width:0,height:0}}function u(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}if("object"===("undefined"==typeof window?"undefined":n(window))){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return void("isIntersecting"in window.IntersectionObserverEntry.prototype||
Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var f=window.document,d=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){var e=this._observationTargets.some(function(e){return e.element==t});if(!e){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,
entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=
[],t},e.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},e.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});
return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(f,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(f,
{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(window,"resize",this._checkForIntersections,!0),s(f,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():
l();this._observationTargets.forEach(function(i){var r=i.element,s=a(r),c=this._rootContainsTarget(r),l=i.entry,u=e&&c&&this._computeTargetAndRootIntersection(r,n),h=i.entry=new t({time:o(),target:r,boundingClientRect:s,rootBounds:n,intersectionRect:u});l?e&&c?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=
function(t,e){if("none"!=window.getComputedStyle(t).display){for(var n=a(t),o=n,i=h(t),r=!1;!r;){var s=null,l=1==i.nodeType?window.getComputedStyle(i):{};if("none"==l.display)return;if(i==this.root||i==f?(r=!0,s=e):i!=f.body&&i!=f.documentElement&&"visible"!=l.overflow&&(s=a(i)),s&&(o=c(s,o),!o))break;i=h(i)}return o}},e.prototype._getRootRect=function(){var t;if(this.root)t=a(this.root);else{var e=f.documentElement,n=f.body;t={top:0,left:0,right:e.clientWidth||n.clientWidth,width:e.clientWidth||
n.clientWidth,bottom:e.clientHeight||n.clientHeight,height:e.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},e.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},e.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||
0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||u(f,this.root)},e.prototype._rootContainsTarget=function(t){return u(this.root||f,t)},e.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},e.prototype._unregisterInstance=function(){var t=d.indexOf(this);t!=-1&&d.splice(t,1)},window.IntersectionObserver=e,window.IntersectionObserverEntry=
t}}()}])});