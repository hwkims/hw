!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";function r(e){_.push(e),L||(L=!0,w(n))}function i(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function n(){L=!1;var e=_;_=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var r=e.takeRecords();a(e),r.length&&(e.callback_(r,e),t=!0)}),t&&n()}function a(e){e.nodes_.forEach(function(t){var r=N.get(t);r&&r.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function s(e,t){for(var r=e;r;r=r.parentNode){var i=N.get(r);if(i)for(var n=0;n<i.length;n++){var a=i[n],s=a.options;if(r===e||s.subtree){var o=t(s);o&&a.enqueue(o)}}}}function o(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++E}function d(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function u(e){var t=new d(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function c(e,t){return x=new d(e,t)}function h(e){return y?y:(y=u(x),y.oldValue=e,y)}function v(){x=y=void 0}function f(e){return e===y||e===x}function l(e,t){return e===t?e:y&&f(e)?y:null}function b(e,t,r){this.observer=e,this.target=t,this.options=r,this.transientObservedNodes=[]}var p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,m=window.WeakMap;if("undefined"==typeof m){var g=Object.defineProperty,O=Date.now()%1e9;m=function(){this.name="__st"+(1e9*Math.random()>>>0)+(O++ +"__")},m.prototype={set:function(e,t){var r=e[this.name];return r&&r[0]===e?r[1]=t:g(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];if(!t)return!1;var r=t[0]===e;return t[0]=t[1]=void 0,r},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}var N=new m,w=window.msSetImmediate;if(!w){var M=[],D=String(Math.random());window.addEventListener("message",function(e){if(e.data===D){var t=M;M=[],t.forEach(function(e){e()})}}),w=function(e){M.push(e),window.postMessage(D,"*")}}var L=!1,_=[],E=0;o.prototype={observe:function(e,t){if(e=i(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=N.get(e);r||N.set(e,r=[]);for(var n,a=0;a<r.length;a++)if(r[a].observer===this){n=r[a],n.removeListeners(),n.options=t;break}n||(n=new b(this,e,t),r.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=N.get(e),r=0;r<t.length;r++){var i=t[r];if(i.observer===this){i.removeListeners(),t.splice(r,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var x,y;b.prototype={enqueue:function(e){var t=this.observer.records_,i=t.length;if(t.length>0){var n=t[i-1],a=l(n,e);if(a)return void(t[i-1]=a)}else r(this.observer);t[i]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=N.get(e);t||N.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=N.get(e),r=0;r<t.length;r++)if(t[r]===this){t.splice(r,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,r=e.relatedNode.namespaceURI,i=e.target,n=new c("attributes",i);n.attributeName=t,n.attributeNamespace=r;var a=null;"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(a=e.prevValue),s(i,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(t)!==-1||e.attributeFilter.indexOf(r)!==-1))return e.attributeOldValue?h(a):n});break;case"DOMCharacterDataModified":var i=e.target,n=c("characterData",i),a=e.prevValue;s(i,function(e){if(e.characterData)return e.characterDataOldValue?h(a):n});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var o,d,i=e.relatedNode,u=e.target;"DOMNodeInserted"===e.type?(o=[u],d=[]):(o=[],d=[u]);var f=u.previousSibling,l=u.nextSibling,n=c("childList",i);n.addedNodes=o,n.removedNodes=d,n.previousSibling=f,n.nextSibling=l,s(i,function(e){if(e.childList)return n})}v()}},p||(p=o),e.exports=p}])});