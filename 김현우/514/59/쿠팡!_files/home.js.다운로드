define("CategoryBest",["jquery","../lib/jquery/plugin/jquery-ui.sortable.min","common/baseAction","common/utils/cookieUtils","common/utils/browserChecker","common/essentialData","common/adsplatform/ViewableImpressionLogger","text!template/search/searchAdBadgeTooltip.html","couLog"],function(r,e,a,t,n,s,c,i,d){"use strict";function o(e){this.domName={win:r(window),root:"#categoryBestUnit",categoryBoxList:"#categoryBestUnit .category-best-unit",promotions:"#categoryBestUnit .promotion",productLists:"#categoryBestUnit .best-product-list",categoryBestLink:"#categoryBestUnit .category-best-link",menu:"#categoryBestMenu",menuCategoryBtnList:"#categoryBestMenu .category-anchor",settingButton:"#categoryBestMenu .setting",settingLayer:"#categoryBestMenu .set-category-layer",settingLayerTail:"#categoryBestMenu .box-tail",settingCategoryListWrap:"#categoryBestMenu .set-category-list",settingCategoryList:"#categoryBestMenu .set-category-list li",settingCategoryCheckbox:"#categoryBestMenu .set-category-list input[type=checkbox]"},this.callBackFn=e||function(){},this.init()}var l=r(".ad-badge"),u={},m={};coupangWebRequire(["HomeWebLogSchemas"],function(e){u=r.extend(u,e.BASE_LOG_PARAMS),m=r.extend(u,e.LOG_PARAMS)});function p(){r("body").prepend(r(".ad-badge-tooltip"));var e=Handlebars.compile(i),t=(r("body").append(e()),r(".ad-badge-tooltip"));l.on("mouseover",".ad-badge-svg",function(e){e=r(e.currentTarget).offset();e&&t.css({top:e.top,left:e.left}).show()}),l.on("mouseout",".ad-badge-svg",function(e){t.hide()}),-1<navigator.appVersion.indexOf("Win")&&t.css("letter-spacing","-1.5px")}return o.prototype={init:function(){for(var e in this.elements={},this.domName)this.elements[e]=r(this.domName[e]);this.setElementPosition(),this.activateCategoryButton(),this.setCategory(),"B"===s.getAbTestOptionByKey("2491")&&this.setSettingLayerHeight(),this.sendImpression(),this.bindEvent()},orderingCategory:function(e,t){if(!e)return!1;t=t||this.categories.display;for(var n=e.length-1;0<=n;n--){var i=this.elements.settingCategoryCheckbox.filter("[data-display-category="+e[n]+"]").parents("li");i.prependTo(i.parent())}this.elements.settingCategoryCheckbox.prop("checked",!1),r.each(t,r.proxy(function(e,t){this.elements.settingCategoryListWrap.find("[data-display-category="+t+"]").prop("checked",!0),this.elements.settingCategoryListWrap.find("[data-display-category="+t+"]").next().css("opacity","1")},this))},setCategory:function(){this.categories={data:this.elements.root.data("categories")?this.elements.root.data("categories").split(","):[],display:[],_default:this.elements.settingCategoryListWrap.data("default-category-list")?this.elements.settingCategoryListWrap.data("default-category-list").split(","):[]},r.each(this.elements.categoryBoxList,r.proxy(function(e,t){t=r(t).attr("class").replace("category-best-unit","").trim()||"";this.categories.display.push(t)},this)),this.orderingCategory(this.categories.display)},setElementPosition:function(){this.positions={menuMarginTop:10,bestAreaOffsetTop:this.elements.root.offset().top+parseInt(this.elements.menu.css("marginTop"))-10,startStayOffsetTop:this.elements.root.offset().top+this.elements.root.innerHeight()-this.elements.menu.outerHeight()-10,stayOffsetTop:this.elements.root.innerHeight()-this.elements.menu.outerHeight()-10,categoryBoxesPosition:[]},this.elements.categoryBoxList.each(r.proxy(function(e,t){this.positions.categoryBoxesPosition.push(r(t).offset().top-this.positions.menuMarginTop-e*this.elements.menuCategoryBtnList.eq(0).outerHeight())},this))},setSettingLayerHeight:function(){r(window).height()<=740?this.elements.settingLayer.addClass("scroll-view"):this.elements.settingLayer.removeClass("scroll-view")},reset:function(e){this.setElementPosition(),this.activateCategoryButton(),"ordering"==e&&this.orderingCategory(this.categories._default,this.categories._default)},closeTooltip:function(){t.setCookie("hideCategoryBestTooltip",!0)},sendImpression:function(){if("undefined"==typeof CoupangWebLog)return!1;var i=this;r(this.elements.productLists).each(function(){var e,t=r(this).find(".prod-list .category-best__ad-badge a"),n=(0<t.length&&(n=r(t[0]).data("logImpression"))&&(e=n.id,e=m[e].meta,i.sendC3ImpressionLogData(n,e,t)),r(this).find(".prod-list .product-unit"));0<n.length&&(e=r(n[0]).data("logImpression"))&&(t=m.impression_c3_product_listing_all.meta,i.sendC3ImpressionLogData(e,t,n))})},sendC3ImpressionLogData:function(e,t,n){var i,o,a,s={meta:{},data:{},extra:{}};e&&(i=e.id,s.data=r.extend({},s.data,{domain:"home",pageName:"home",logCategory:"impression",logType:"impression",eventName:i}),s.data=r.extend({},s.data,e.param),s.meta=r.extend({},s.meta,t),o=[],a=[],n.each(function(){var e=r(this).data("logImpression");e&&e.detail&&(e.detail.productId&&""!==e.detail.productId&&o.push(e.detail.productId),e.detail.vendorItemId)&&""!==e.detail.vendorItemId&&a.push(e.detail.vendorItemId)}),s.data=r.extend({},s.data,{productIdList:o.join(","),vendorItemIdList:a.join(",")}),CoupangWebLog.submit(s))},bindEvent:function(){this.elements.settingLayer.find(".set-category-list").sortable({revert:!0}).disableSelection(),r(this.elements.promotions).each(function(){a.slide({slider:r(this),size:1,size1hide:!0,rolling:!0,speed:2e3})}),r(this.elements.productLists).each(function(){a.slide({slider:r(this),size:6,size1hide:!0})});var e=l.size();if(0===e&&(l=r(".ad-badge"),e=l.size()),0<e){p();for(var t=e,n=0;n<t;n++){var i=new Image,o=r(l[n]);i.setAttribute("src",o.data("impressionUri"))}r(".category-best__ad-badge").each(function(e,t){new c(t,r(t).find(".ad-badge").data("viewImpression"))}),r(".prod-list").on("click",".category-best__ad-badge",function(e){(new Image).setAttribute("src",r(e.currentTarget).find(".ad-badge").data("clickUri"))})}this.elements.settingButton.click(r.proxy(function(){this.elements.settingLayerTail.css("top",this.elements.menu.innerHeight()-22),this.elements.settingLayer.is(":visible")&&this.orderingCategory(this.categories.display),this.elements.settingLayer.toggle()},this)),this.elements.menuCategoryBtnList.click(r.proxy(function(e){e.preventDefault();e=r(r(e.target).attr("href"));0!=e.size()&&r(window).scrollTop(e.offset().top)},this)),r(".set-category-list").find("input").on("change",function(){this.checked?r(this).next().css("opacity","1"):r(this).next().css("opacity","0.2")}),this.elements.settingLayer.find(".reset").click(r.proxy(function(e){e.preventDefault(),this.reset("ordering")},this)),this.elements.settingLayer.find(".cancel").click(r.proxy(function(e){e.preventDefault(),this.orderingCategory(this.categories.display),this.elements.settingLayer.hide()},this)),this.elements.settingLayer.find(".confirm").click(r.proxy(function(e){e.preventDefault(),this.submit()},this)),this.elements.categoryBestLink.click(function(){d.execManualLogging({logCategory:"event",logType:"scroll",logLabel:"home",viewGrp:"categoryBestUnit"})}),r(window).scroll(r.proxy(this.scrollEvent,this)).trigger("scroll"),"B"===s.getAbTestOptionByKey("2491")&&r(window).on("resize",r.proxy(this.setSettingLayerHeight,this))},scrollEvent:function(){var e=this.positions,t=this.elements;e.startStayOffsetTop<t.win.scrollTop()?t.menu.addClass("stay").css({top:e.stayOffsetTop+"px","margin-top":e.menuMarginTop+"px"}).show():e.bestAreaOffsetTop<t.win.scrollTop()&&e.startStayOffsetTop>t.win.scrollTop()?t.menu.removeClass("stay").addClass("fixed").css({top:"","margin-top":e.menuMarginTop+"px"}).show():t.menu.removeClass("fixed stay").css({top:"","margin-top":"72px"}).hide(),this.activateCategoryButton()},activateCategoryButton:function(){for(var e=0,t=this.elements.win.scrollTop(),n=this.positions.categoryBoxesPosition,i=this.elements.menuCategoryBtnList,o=0;n.length>o;o++)n[o]<=t&&(e=o);i.removeClass("on").eq(e).addClass("on")},getCheckedCategory:function(){var e=[];return this.elements.settingCategoryListWrap.find("input:checked").each(function(){e.push(r(this).val())}),e},saveCategories:function(e){r.ajax({url:"/np/preference",type:"post",data:{categories:e},error:function(e){"timeout"!==e.statusText&&404!==e.status||console}})},submit:function(){p();var e=this.getCheckedCategory();if(0==e.length)return alert(Pacifik.formatMessage("coupang.web.4b4d66","최소 1개 카테고리를 선택해 주세요"));this.elements.root.data("categories",e.join(",")),this.elements.win.scrollTop(this.positions.bestAreaOffsetTop-20),this.saveCategories(e.join(",")),this.closeTooltip(),this.callBackFn.apply()}},o}),define(["jquery"],function(n){return{redBadgeNum:0,allBadgeNum:0,$numberingSpan:null,run:function(e,t){e&&t&&(this.redBadgeNum=e,this.allBadgeNum=t),this.$numberingSpan=n("#productList").find(".best-prod-numbering"),0!==this.$numberingSpan.length&&(this._coloring(),this._numbering())},_numbering:function(){for(var e=this.$numberingSpan.find("em").slice(0,this.allBadgeNum),t=this.allBadgeNum,n=0;n<t;n++)e.eq(n).text(n+1)},_coloring:function(){this.$numberingSpan.slice(0,this.redBadgeNum).addClass("best10"),this.$numberingSpan.slice(this.redBadgeNum,this.allBadgeNum).addClass("best30")}}}),define("countdown",["jquery"],function(){function e(e){if(!e.startTime||!e.endTime)throw new Error("Please enter startTime and endTime");if(e.startTime>=e.endTime)throw new Error("endTime must be greater than startTime");if(e.onRender&&"function"!=typeof e.onRender)throw new Error("onRender must be a function");if(e.onComplete&&"function"!=typeof e.onComplete)throw new Error("onRender must be a function");this.startTime=e.startTime,this.endTime=e.endTime,this.onRender=e.onRender,this.onComplete=e.onComplete,this.interval=e.interval||1e3,this.timer=null,this.start()}return e.prototype={start:function(){function e(e){e&&(a.startTime=a.startTime+e);var e=a.endTime-a.startTime,t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),i=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3);e<0?(a.stop(),a.onComplete&&a.onComplete()):a.onRender&&a.onRender({days:t,hours:n,minutes:i,seconds:o})}var a=this;e(),this.timer=setInterval(function(){e(a.interval)},this.interval)},stop:function(){this.timer&&clearInterval(this.timer)}},e}),define("couponExpirationReminder",["jquery","lodash"],function(s,r){return{init:function(){this.fetchData()},fetchData:function(){var t=this;s.ajax({url:"/np/home/lapse-promotion-widget",dataType:"json"}).success(function(e){try{t.handleResponseData(e)}catch(e){}}).fail(function(){})},handleResponseData:function(e){this.checkExist(e)&&this.renderGwWidget(s("#couponExpirationReminder"),e)},renderGwWidget:function(e,t){function o(e,t){window.CoupangWebLog&&window.CoupangWebLog.submit({meta:e,data:t})}function n(e){if(e&&Array.isArray(e)&&0<e.length)for(var t=0;t<e.length;t++){var n=e[t],i={schemaId:r.get(n,"id"),schemaVersion:r.get(n,"version"),eventName:r.get(n,"name")};o(i,r.get(n,"mandatory"))}}var i,a;i=e,a=t,coupangWebRequire(["common/components/dist/coupang-expiration"],function(e){i.on("coupang-expiration-carousel.impression",function(e){var t=r.get(a,"entity.logging.bypass.exposureSchema"),n=r.get(t,"mandatory"),t={schemaId:r.get(t,"id"),schemaVersion:r.get(t,"version"),eventName:r.get(t,"name")};o(t,n)}),i.on("coupang-expiration-carousel.item.click",function(e){e=s(e.target).data("index"),e=r.get(a,["entity","productEntities",e,"logging","bypass","clickSchemas"])||[];n(e)}),i.on("coupang-expiration-carousel.cart.click",function(e){e=s(e.target).data("index"),e=r.get(a,["entity","productEntities",e,"addToCartInfo","logging","bypass","clickSchemas"])||[];n(e)}),new e(i,{pageSize:5,step:1}).render(a)})},checkExist:function(e){return!!e&&!(!e||0===e.length)}}}),define(["jquery"],function(e){return{init:function(){(dataLayer=dataLayer||[]).push({PageType:"HomePage"})}}}),define("disagreeRegainFeeChangePopup",["jquery","lodash","moment"],function(i,e,n){var o,a=i("#disagreeRegainFeeChangePopup"),s=a.data(),r=!1;function c(){i("html").css("overflow-y","scroll")}function t(t){r||(r=!0,i.ajax({url:"/vp/notice/wow-fee-change/agreement",type:"POST",cache:!1,data:{agreed:"agree"===t},success:function(e){e.result?d(t,!0):d(t,!1),c(),a.remove(),r=!1},error:function(){d(t,!1),c(),a.remove(),r=!1}}))}function d(e,t){e={domain:"home",pageName:"home",eventName:"click_home_wow_consent_1st_popup",logCategory:"event",logType:"click",clickType:e,effectiveDate:n(s.disagreeRegainFeeChangePopup.effectiveDateTimestamp).format("YYYY-MM-DD"),isBudExposed:"n"};t?e.isSubmitSuceed="y":!1===t&&(e.isSubmitSuceed="n"),l({meta:{schemaId:8871,schemaVersion:2},data:e})}function l(e){CoupangWebLog&&CoupangWebLog.submit(e)}return{initialize:function(){a.length&&coupangWebRequire(["page/loyalty/regain/disagreeRegainFeeChangePopup.hbs"],function(e){e=i(e(s));a.show(),a.html(e),i(window).off("message").on("message",function(t){var n,t=t.originalEvent.data;try{n=i.isPlainObject(t)&&t.type?t:JSON.parse(t)}catch(e){n={type:t}}"frame.close"===n.type&&o&&(o.close(),o=null)}),i("#regain-agree-button").on("click",function(){t("agree")}),i("#regain-disagree-button").on("click",function(){t("disagree")}),i("#wow-membership-tnc").on("click",function(){d("tnc"),o=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697")}),i("html").css("overflow-y","hidden"),l({meta:{schemaId:8870,schemaVersion:1},data:{domain:"home",pageName:"home",eventName:"impression_home_wow_consent_1st_popup",logCategory:"impression",logType:"impression",isBudExposed:"n"}})})}}}),define("disagreeRegainFeeChangeSecondPopup",["jquery","lodash","moment","countdown"],function(o,e,a,t){var s,r,c=o("#disagreeRegainFeeChangeSecondPopup"),d=c.data(),n=!1;function l(e,t){n||o.ajax({url:"/vp/notice/wow-fee-change/agreement",type:"POST",cache:!1,data:{agreed:"agree"===e},beforeSend:function(){n=!0},success:function(e){e.result||alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.success&&t.success(e)},error:function(){alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.error&&t.error()},complete:function(){n=!1,o("html").css("overflow-y","scroll"),c.remove()}})}function u(e){var t={domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"event",logType:"click",clickType:e.data.clickType,type:"regain_2nd_pop_up",effectiveDate:a(d.secondDisagreeRegainFeeChangePopup.effectiveDateTimestamp).format("YYYY-MM-DD")},n=o(".benefits-popup-bud"),i=n.data("budAmount");n.length?(t.isBudExposed="y",t.budAmount=i):t.isBudExposed="n",e.data.isSubmitSuceed?t.isSubmitSuceed="y":!1===e.data.isSubmitSuceed&&(t.isSubmitSuceed="n"),p({meta:e.meta,data:t})}function m(e){var t={domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"impression",logType:"impression",type:"regain_2nd_pop_up"},n=o(".benefits-popup-bud"),i=n.data("budAmount");n.length?(t.isBudExposed="y",t.budAmount=i):t.isBudExposed="n",p({meta:e.meta,data:t})}function p(e){CoupangWebLog&&CoupangWebLog.submit(e)}function g(e){return 1===e.toString().length?"0"+e:e}return{initialize:function(){c.length&&coupangWebRequire(["page/loyalty/regain/disagreeRegainFeeChangeSecondPopup.hbs"],function(e){var e=o(e(d)),n=(c.show(),c.html(e),o(".regain-v2-countdown")),i=o("#regain-countdown");try{r=new t({startTime:d.secondDisagreeRegainFeeChangePopup.startTime,endTime:d.secondDisagreeRegainFeeChangePopup.endTime,onRender:function(e){var t=0<e.days?e.days+"일 ":"",e=g(e.hours)+":"+g(e.minutes)+":"+g(e.seconds);i.html(t+e),"visible"!==n.css("visibility")&&n.css("visibility","visible")},onComplete:function(){r.stop(),c.remove()}})}catch(e){}o(window).off("message").on("message",function(t){var n,t=t.originalEvent.data;try{n=o.isPlainObject(t)&&t.type?t:JSON.parse(t)}catch(e){n={type:t}}"frame.close"===n.type&&s&&(s.close(),s=null)}),o("#regain-second-popup-agree-button").on("click",function(){l("agree",{success:function(){u({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"agree",isSubmitSuceed:!0}})},error:function(){u({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",isSubmitSuceed:!1}})}})}),o("#regain-second-popup-disagree-button").on("click",function(){u({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",isSubmitSuceed:!1}}),coupangWebRequire(["page/loyalty/regain/disagreeRegainBenefitPopup.hbs"],function(e){e=o(e(d));c.html(e),r&&r.stop(),o("#regain-second-agree-button").on("click",function(){l("agree",{success:function(){u({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"agree",isSubmitSuceed:!0}})},error:function(){u({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"disagree",isSubmitSuceed:!1}})}})}),o("#regain-second-disagree-button").on("click",function(){l("disagree",{success:function(){u({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"disagree",isSubmitSuceed:!0}})},error:function(){u({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"disagree",isSubmitSuceed:!1}})}})}),o("#regain-second-tnc-button").on("click",function(){u({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"tnc"}}),s=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697")}),m({meta:{schemaId:8872,schemaVersion:2},data:{eventName:"impression_home_wow_consent_2nd_popup"}})})}),o("#regain-second-tnc").on("click",function(){u({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"tnc"}}),s=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697")}),o("html").css("overflow-y","hidden"),m({meta:{schemaId:8870,schemaVersion:3},data:{eventName:"impression_home_wow_consent_1st_popup"}})})}}}),define("disagreeRegainFeeChangeThirdPopup",["jquery","lodash","moment","countdown"],function(o,e,a,t){var s,r,c=o("#disagreeRegainFeeChangeThirdPopup"),d=c.data(),l=!1;function u(e,t){l||o.ajax({url:"/vp/notice/wow-fee-change/agreement",type:"POST",cache:!1,data:{agreed:"agree"===e},beforeSend:function(){l=!0},success:function(e){e.result||alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.success&&t.success(e)},error:function(){alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.error&&t.error()},complete:function(){l=!1,m(),c.remove()}})}function m(){o("html").css("overflow-y","scroll")}function p(e){var t={domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"event",logType:"click",clickType:e.data.clickType,type:"regain_3rd_pop_up",effectiveDate:a(d.thirdDisagreeRegainFeeChangePopup.effectiveDateTimestamp).format("YYYY-MM-DD")},n=o(".benefits-popup-bud"),i=n.data("budAmount");n.length?(t.isBudExposed="y",t.budAmount=i):t.isBudExposed="n",e.data.isSubmitSuceed?t.isSubmitSuceed="y":!1===e.data.isSubmitSuceed&&(t.isSubmitSuceed="n"),h({meta:e.meta,data:t})}function g(e){var t={domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"impression",logType:"impression",type:"regain_3rd_pop_up"},n=o(".benefits-popup-bud"),i=n.data("budAmount");n.length?(t.isBudExposed="y",t.budAmount=i):t.isBudExposed="n",h({meta:e.meta,data:t})}function h(e){CoupangWebLog&&CoupangWebLog.submit(e)}function f(e){return 1===e.toString().length?"0"+e:e}return{initialize:function(){c.length&&coupangWebRequire(["page/loyalty/regain/disagreeRegainFeeChangeThirdPopup.hbs"],function(e){var e=o(e(d)),n=(c.show(),c.html(e),o(".regain-v3-countdown")),i=o("#regain-countdown");try{r=new t({startTime:d.thirdDisagreeRegainFeeChangePopup.startTime,endTime:d.thirdDisagreeRegainFeeChangePopup.endTime,onRender:function(e){var t='<span class="countdown-days">'+(0<e.days?e.days+'<span class="countdown-day-text">'+Pacifik.formatMessage("coupang.web.consent.third.regain.countdown.day","일")+"</span>":"")+"</span>",t=(t=(t=(t+="B"===d.thirdDisagreeRegainFeeChangePopup.abTest&&0<e.days?'<span class="countdown-colon">:</span>':"")+('<span class="countdown-hours">'+f(e.hours)+"</span>")+'<span class="countdown-colon">:</span>')+('<span class="countdown-minutes">'+f(e.minutes)+"</span>")+'<span class="countdown-colon">:</span>')+('<span class="countdown-seconds">'+f(e.seconds)+"</span>");i.html(t),"visible"!==n.css("visibility")&&n.css("visibility","visible")},onComplete:function(){r.stop(),m(),c.remove()}})}catch(e){}o(window).off("message").on("message",function(t){var n,t=t.originalEvent.data;try{n=o.isPlainObject(t)&&t.type?t:JSON.parse(t)}catch(e){n={type:t}}"frame.close"===n.type&&s&&(s.close(),s=null)}),o("#loyalty-fee-change-agree-button").on("click",function(){u("agree",{success:function(){p({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"agree",isSubmitSuceed:!0}})},error:function(){p({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"agree",isSubmitSuceed:!1}})}})}),o("#loyalty-fee-change-disagree-button").on("click",function(){l||(p({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",isSubmitSuceed:!1}}),coupangWebRequire(["page/loyalty/regain/disagreeRegainBenefitThirdPopup.hbs"],function(e){e=o(e(d));c.html(e),r&&r.stop(),o("#regain-third-agree-button").on("click",function(){u("agree",{success:function(){p({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"agree",isSubmitSuceed:!0}})},error:function(){p({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"agree",isSubmitSuceed:!1}})}})}),o("#regain-third-disagree-button").on("click",function(){u("disagree",{success:function(){p({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"disagree",isSubmitSuceed:!0}})},error:function(){p({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"disagree",isSubmitSuceed:!1}})}})}),o("#regain-third-tnc-button").on("click",function(){l||(p({meta:{schemaId:8873,schemaVersion:2},data:{eventName:"click_home_wow_consent_2nd_popup",clickType:"tnc"}}),s=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697"))}),g({meta:{schemaId:8872,schemaVersion:2},data:{eventName:"impression_home_wow_consent_2nd_popup"}})}))}),o("#loyalty-fee-change-footer-expand-button").on("click",function(){o(".loyalty-fee-change-contents__footer-container").toggleClass("expand")}),o("#loyalty-fee-change-show-tnc-button").on("click",function(){l||(p({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"tnc"}}),s=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697"))}),o("html").css("overflow-y","hidden"),g({meta:{schemaId:8870,schemaVersion:3},data:{eventName:"impression_home_wow_consent_1st_popup"}})})}}}),define("disagreeRegainPermanentPopup",["jquery","lodash","moment","countdown","common/utils/cookieUtils"],function(o,e,t,i,a){var s,r,c=o("#disagreePermanentBanner"),d=o("#disagreeRegainPermanentPopup"),l=c.data(),n=!1,u="hasPermanentBanner",m=[];function p(e,t){n||o.ajax({url:"/vp/notice/wow-fee-change/agreement",type:"POST",cache:!1,data:{agreed:"agree"===e},beforeSend:function(){n=!0},success:function(e){e.result||alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.success&&t.success(e)},error:function(){alert(Pacifik.formatMessage("coupang.web.regain.date.expire","지금은 동의 여부를 선택할 수 없습니다.\n월회비 변경에 대해 동의하지 않기로 유지됩니다.")),t.error&&t.error()},complete:function(){n=!1,o("html").css("overflow-y","scroll"),r.stop(),d.remove(),c.remove()}})}function g(e){var t=o.extend({domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"event",logType:"click",clickType:e.data.clickType},e.data);f({meta:e.meta,data:t})}function h(e){var t=o.extend({domain:"home",pageName:"home",eventName:e.data.eventName,logCategory:"impression",logType:"impression"},e.data);f({meta:e.meta,data:t})}function f(e){CoupangWebLog&&CoupangWebLog.submit(e)}function y(e){return 1===e.toString().length?"0"+e:e}return{initialize:function(){c.length&&"Y"!==a.getValue(u)&&coupangWebRequire(["page/loyalty/regain/disagreeRegainPermanentCount.hbs"],function(e){var n;c.html(o(e(l))).show(),o("#permanent-time").on("click",function(){coupangWebRequire(["page/loyalty/regain/disagreeRegainPermanentPopup.hbs"],function(e){var n,i;d.html(o(e(l))).show(),n=o("#regain-permanent-countdown"),i=o(".regain-v2-countdown"),m.push(function(e){var t=0<e.days?e.days+"일 ":"",e=y(e.hours)+":"+y(e.minutes)+":"+y(e.seconds);n.html(t+e),"visible"!==i.css("visibility")&&i.css("visibility","visible")}),o(window).off("message").on("message",function(t){var n,t=t.originalEvent.data;try{n=o.isPlainObject(t)&&t.type?t:JSON.parse(t)}catch(e){n={type:t}}"frame.close"===n.type&&s&&(s.close(),s=null)}),o("#regain-permanent-popup-agree-button").on("click",function(){p("agree",{success:function(){g({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"agree",type:"regain_permanent",isSubmitSuceed:"y",effectiveDate:t(l.thirdDisagreeRegainPermanentBanner.effectiveDateTimestamp).format("YYYY-MM-DD"),isBudExposed:"n",budAmount:null}})},error:function(){g({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",type:"regain_permanent",isSubmitSuceed:"n",effectiveDate:t(l.thirdDisagreeRegainPermanentBanner.effectiveDateTimestamp).format("YYYY-MM-DD"),isBudExposed:"n",budAmount:null}})}})}),o("#regain-permanent-popup-disagree-button").on("click",function(){p("disagree",{success:function(){g({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",type:"regain_permanent",isSubmitSuceed:"y",effectiveDate:t(l.thirdDisagreeRegainPermanentBanner.effectiveDateTimestamp).format("YYYY-MM-DD"),isBudExposed:"n",budAmount:null}})},error:function(){g({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"disagree",type:"regain_permanent",isSubmitSuceed:"n",effectiveDate:t(l.thirdDisagreeRegainPermanentBanner.effectiveDateTimestamp).format("YYYY-MM-DD"),isBudExposed:"n",budAmount:null}})}})}),o("#regain-permanent-tnc").on("click",function(){g({meta:{schemaId:8871,schemaVersion:4},data:{eventName:"click_home_wow_consent_1st_popup",clickType:"tnc",type:"regain_permanent",isBudExposed:"n",budAmount:null}}),s=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697")}),o("html").css("overflow-y","hidden"),h({meta:{schemaId:8870,schemaVersion:3},data:{eventName:"impression_home_wow_consent_1st_popup",type:"regain_permanent",isBudExposed:"n",budAmount:null}})}),g({meta:{schemaId:9357,schemaVersion:1},data:{eventName:"click_home_wow_consent_regain_permanent_popup",clickType:"seemore"}})}),o("#permanent-banner-close").on("click",function(){a.getValue(u)||a.setCookie(u,"Y",{timeUnit:"DAY",timeValue:3}),c.remove(),g({meta:{schemaId:9357,schemaVersion:1},data:{eventName:"click_home_wow_consent_regain_permanent_popup",clickType:"close"}})}),n=o("#permanent-countdown"),m.push(function(e){var t=0<e.days?e.days+"일 ":"",e='<span class="countdown__number">'+y(e.hours)+'</span>:<span class="countdown__number">'+y(e.minutes)+'</span>:<span class="countdown__number">'+y(e.seconds)+"</span>";n.html(t+e)});try{r=new i({startTime:l.thirdDisagreeRegainPermanentBanner.startTime,endTime:l.thirdDisagreeRegainPermanentBanner.endTime,onRender:function(e){if(m.length)for(var t=0;t<m.length;t++)m[t](e)},onComplete:function(){r.stop(),c.remove(),d.remove()}})}catch(e){}h({meta:{schemaId:9356,schemaVersion:1},data:{eventName:"impression_home_wow_consent_regain_permanent_popup"}})})}}}),define("homeContentUnit",["jquery","common/template/urlBuilder","home/rocketBadge","common/essentialData"],function(e,n,i,o){"use strict";var t="basepreviewmode",a="baseshowdatetime",s="basesegmentid",r="basemembersrl",c=function(){return 1==e("#"+t).data(t)},d=function(){return e("#"+a).data(a)},l=function(){return e("#"+s).data(s)},u=function(){return e("#"+r).data(r)};return{init:function(e,t,n,i){e={target:e,unit:t,duplicateProductIds:n,callback:i,sort:!1,showDateTime:null,segmentId:l(),memberSrl:u()};c()&&(e.showDateTime=d()),this.async(e)},async:function(t){e.ajax({url:n.buildRequestUrl("/np/home/unit/"+t.unit),type:"GET",data:{duplicateProductIds:t.duplicateProductIds,sort:t.sort,segmentId:t.segmentId,showDateTime:t.showDateTime,memberSrl:t.memberSrl},dataType:"HTML",success:function(e){t.target.html(e),t.callback&&t.callback(),"B"===o.getAbTestOptionByKey("2449")&&""!==e&&new i(t.target),t.target.find(".main-section").outerHeight()<=0&&t.target.remove()},error:function(e){"timeout"!==e.statusText&&404!==e.status||procMng.hideIndicator()}})}}}),define("homeRightSideBar",["jquery","common/essentialData","common/adsplatform/ViewableImpressionLogger","weblog","HomeWebLogger","commonUtils"],function(c,e,i,t,n,a){function o(e,t){e&&(this.$container=c(e),this.$container.length)&&(this.options=c.extend({},{stickRefSelector:"",departRefSelector:""},t),this.init(this.options))}o.prototype.init=function(){window.CoupangWebLog||t.init({platform:"web",service:"coupang",mode:""===e.getProfile()||"production"===e.getProfile()?"production":"test",useAutoSendPageViewLog:!1}),this.bindEvent()},o.prototype.bindEvent=function(){this.$container.data("is-stick")&&this.bindStickOnScroll(),this.bindImpression(),this.bindAdsBannerClick(),this.bindGoTopBtnClick(),this.loadCmgComponent()},o.prototype.bindImpression=function(){var n=this,t=(n.$container.find(".ads-line-banner-container .ads-line-banner-list li>a").each(function(e,t){s("impression",c(t).data("adsplatform").impressionLogUri),new i(t)}),function(){var e=n.$container.get(0).getBoundingClientRect();0<=e.top&&e.top<=c(window).height()&&(n.$container.hasClass("viewed")||(n.$container.addClass("viewed"),n.$container.find(".ads-line-banner-container .ads-line-banner-list li>a").each(function(e,t){r(n.getImpressionLoggingData())}),c(window).off("scroll",t)))});c(window).on("scroll",t)},o.prototype.bindGoTopBtnClick=function(){var e=this;c(".side-button #sideTop").on("click",function(){e.$container.removeClass("stick").css("top",0)})},o.prototype.bindAdsBannerClick=function(){var t=this;this.$container.on("click",".ads-line-banner-container .ads-line-banner-link",function(e){e=c(e.currentTarget);s("click",e.data("adsplatform").clickLogUri),d(t.getClickLoggingData(e))})},o.prototype.bindStickOnScroll=function(){var n=this,i=n.$container.offsetParent(),e=n.options.stickRefSelector?c(n.options.stickRefSelector):n.$container,o=n.options.departRefSelector?c(n.options.departRefSelector):"",t=parseInt(e.css("padding-top")),a=function(){return o.length&&o.get(0).getBoundingClientRect().top<=n.$container.get(0).getBoundingClientRect().bottom},s=function(){return e.get(0).getBoundingClientRect().top+t<0},r=function(){return n.$container.hasClass("stick")};c(window).on("scroll",function(){var e,t;s()?a()?r()?(n.$container.removeClass("stick"),e=-i.get(0).getBoundingClientRect().top,n.$container.css("top",e),0<(t=n.$container.get(0).getBoundingClientRect().bottom-o.get(0).getBoundingClientRect().top)&&n.$container.css("top",e-t)):0<n.$container.get(0).getBoundingClientRect().top&&n.$container.height()<o.get(0).getBoundingClientRect().top&&(n.$container.addClass("stick"),n.$container.css("top",0)):!r()&&n.$container.height()<o.get(0).getBoundingClientRect().top&&(n.$container.addClass("stick"),n.$container.css("top",0)):r()&&(n.$container.removeClass("stick"),n.$container.css("top",0))})},o.prototype.getImpressionLoggingData=function(){var e=this.$container.find(".ads-line-banner-list li>a"),t=a.getUrlParameters(e.eq(0).attr("href")),n=e.eq(0).data("ad-id"),i=[];return e.each(function(e,t){t=c(t).data("vendor-item-id");i.push(t)}),{adId:n+"",sourceType:t&&t.sourceType||"",vendorItemList:i.join()}},o.prototype.getClickLoggingData=function(e){var t=a.getUrlParameters(e.attr("href")),n=e.data("ad-id"),i=e.data("product-id"),o=e.data("vendor-item-id"),e=e.data("item-id");return{adId:n+"",sourceType:t&&t.sourceType||"",productId:i+"",vendorItemId:o+"",itemId:e+""}},o.prototype.loadCmgComponent=function(){coupangWebRequire(["cmgComponents/dist/pcRightWingBanner"],function(e){e()})};var s=function(e,t){try{return(new Image).src=t,!0}catch(e){return!1}},r=function(e){n.impressionLog({id:"impression_product_ad_line_widget",param:e})},d=function(e){n.clickLogWithoutEventParam({id:"click_product_ad_line_banner",param:e})};return o}),define("homeRollingBanner",["jquery","common/essentialData","weblog","HomeWebLogger"],function(k,o,a,T){function e(e,t,n,i){this.init(e,t,n,i)}return e.prototype={loggingFlag:!1,init:function(e,t,n,i){window.CoupangWebLog||a.init({platform:"web",service:"coupang",mode:""===o.getProfile()||"production"===o.getProfile()?"production":"test",useAutoSendPageViewLog:!1}),this.rollingBanner({indicator:e,slider:k(t),speed:i,activatedClass:n})},rollingBanner:function(e){function t(){var e,t;return!(o.length<1)&&(e=k(window),(t=i.offset().top)+i.height()>e.scrollTop())&&t<e.scrollTop()+e.height()}function n(e){"start"==e?a=setInterval(function(){b("next")},s):clearInterval(a)}var i=(e=k.extend({slider:null,speed:"1000",activatedClass:null,indicator:null},e)).slider,o=i.find("ul").find("li"),a="",s=e.speed,r=i.find("ol"),c=i.find(".move"),d=1,l=Math.ceil(o.size()/d),u=0,m=[],p=e.indicator,g=e.activatedClass,h=t(),f=(k(window).on("scroll",k.proxy(function(){t()?!1===h&&(h=!0,f()):h=!1},this)),function(){var e,t;0<o.length&&m.length<o.length&&(e=k(t=p+" ."+g).find("a").data("logProps"),t=k(t).data("bannerId"),e)&&m.indexOf(t)<0&&!0===h&&(y(e),m.push(t))}),y=function(e){T.impressionLog({id:e.impressionId,param:e.param},{isAsync:!0})},w=function(){k(o).hide(),o.removeClass(g),k(o).each(function(){var e=k(this);Math.floor(e.index()/d)==u?(e.show(),e.addClass(g)):(e.hide(),e.removeClass(g))}),f()},v=function(){r.find("li").removeClass("selected"),r.find("li").eq(u).addClass("selected")},b=function(e){"next"==e?l-1<++u&&(u=0):--u<0&&(u=l-1),v(),w()};i.bind({mouseenter:function(){n("stop")},mouseleave:function(){n("start")}}),n("start");if(c.unbind("click").bind("click",function(e){e.preventDefault(),k(this).hasClass("next")?b("next"):b("prev"),v(),w()}),1===o.size())c.hide(),r.hide();else{r.html("");for(var _=0;_<l;_++)r.append('<li><a title="'+(_+1)+'">'+(_+1)+"</a></li>");r.find("li").each(function(){k(this).on("click",function(){u=k(this).index(),v(),w()})}),v()}w()}},e}),define("homeUnit",["jquery","common/template/urlBuilder","home/rocketBadge","common/essentialData","common/adsplatform/adsplatformLogger","home/categoryBestBanner","home/homeRollingBanner"],function(n,i,o,a,s,r,e){"use strict";return{init:function(e,t,n,i,o){this.ajaxCall({target:e,unit:t,duplicateProductIds:n,callback:i,extraParam:o})},ajaxCall:function(e){var t={target:null,unit:null,duplicateProductIds:null,callback:null,sort:!1},t=n.extend(t,e);n.ajax({url:i.buildRequestUrl("/np/homeunit/"+t.unit),type:"post",data:n.extend({duplicateProductIds:t.duplicateProductIds,sort:t.sort},t.extraParam),dataType:"HTML",success:function(e){t.target.html(e),t.callback&&t.callback(),"BEST_CATEGORY"===t.unit&&(new s(n(".promotion li"),!1),new s(n(".category-best-banner"),!1),new r),"B"===a.getAbTestOptionByKey("2449")&&("BEST_CATEGORY"===t.unit?n(".category-best-unit").each(function(e,t){new o(n(t))}):""!==e&&new o(t.target)),"BEST_CATEGORY"!==t.unit&&(0<(e=t.target.find(".main-section").outerHeight())?t.target.css("height",e):t.target.remove())},beforeSend:function(){"BEST_CATEGORY"===t.unit&&t.target.html('<div class="loading-noti-area"><p class="loading-noti">Loading...</p></div>')},error:function(e){"timeout"!==e.statusText&&404!==e.status||procMng.hideIndicator()}})}}}),define("HomeWebLogSchemas",["jquery"],function(e){"use strict";return{BASE_LOG_PARAMS:{impression_ad:{meta:{schemaId:60,schemaVersion:2},data:{domain:"list",pageName:"list"}},click_rolling_item:{meta:{schemaId:62,schemaVersion:2},data:{domain:"list",pageName:"list"}},click_home_product:{meta:{schemaId:1191,schemaVersion:4}},click_home_product_navigation:{meta:{schemaId:1192,schemaVersion:1}},click_home_rolling_banner_navigation:{meta:{schemaId:1199,schemaVersion:1}}},LOG_PARAMS:{impression_home_todayshot:{meta:{schemaId:1187,schemaVersion:1}},click_home_todays_discovery:{meta:{schemaId:1189,schemaVersion:1},data:{eventGroup:"TodaysDiscovery"}},click_home_yourcartproduct_more:{meta:{schemaId:1190,schemaVersion:1}},click_home_best_category_icon:{meta:{schemaId:1193,schemaVersion:1}},click_home_best_category_setting:{meta:{schemaId:1196,schemaVersion:1}},click_home_best_category_quicklink:{meta:{schemaId:1197,schemaVersion:1},data:{eventGroup:"best_category",contentType:"quicklink"}},click_home_best_category_hotkeyword:{meta:{schemaId:1198,schemaVersion:1},data:{eventGroup:"best_category",contentType:"hotkeyword"}},impression_personalized_gw:{meta:{schemaId:1431,schemaVersion:5}},click_personalized_gw:{meta:{schemaId:1435,schemaVersion:4}},impression_line_banner:{meta:{schemaId:2612,schemaVersion:1}},click_line_banner:{meta:{schemaId:2613,schemaVersion:1}},impression_home_rolling_line_banner:{meta:{schemaId:60,schemaVersion:3},data:{domain:"list",pageName:"list",eventName:"impression_ad"}},click_home_rolling_line_banner:{meta:{schemaId:62,schemaVersion:4},data:{domain:"list",pageName:"list",eventName:"click_rolling_item"}},web_latency_track_log:{meta:{schemaId:2317,schemaVersion:2}},impression_product_ad_line_widget:{meta:{schemaId:2914,schemaVersion:2,eventName:"impression_product_ad_line_widget"}},click_product_ad_line_banner:{meta:{schemaId:2915,schemaVersion:2,eventName:"click_product_ad_line_banner"}},impression_c3_product_listing:{meta:{schemaId:3150,schemaVersion:4}},impression_c3_product_listing_all:{meta:{schemaId:10198,schemaVersion:1}},home_pii_noti_impression:{meta:{schemaId:7553,schemaVersion:1},data:{eventName:"impression_home_pii_noti"}},home_pii_noti_click:{meta:{schemaId:7554,schemaVersion:1},data:{eventName:"click_home_pii_noti"}}}}}),define("HomeWebLogger",["jquery","home/home","common/essentialData"],function(a,e,n){"use strict";var s={page:"view",impression:"impression",click:"event",scroll:"event",latency:"etc"},t={},r={},i=(coupangWebRequire(["HomeWebLogSchemas"],function(e){t=a.extend(t,e.BASE_LOG_PARAMS),r=a.extend(t,e.LOG_PARAMS)}),{bindClickLogEventHandler:function(){a("#contents.home, #todaysHot.main-today").on("click","[data-log-props]",function(e){i.clickLog(e)})},makeLogParam:function(e,t){var n,i,o;return!1!==t.hasOwnProperty("id")&&(n=t.id,o=!(i={meta:{},data:{},extra:{}}),i.data=a.extend({},i.data,{domain:"home",pageName:"home",logCategory:s[e=e||"click"],logType:e,eventName:n}),!0===r.hasOwnProperty(n)&&(o=r[n].hasOwnProperty("data"),i.data=a.extend({},i.data,r[n].data),i.meta=a.extend({},i.meta,r[n].meta),o&&r[n].data.hasOwnProperty("domain")&&(i.data.domain=r[n].data.domain),o)&&r[n].data.hasOwnProperty("pageName")&&(i.data.pageName=r[n].data.pageName),!0===t.hasOwnProperty("param")&&(i.data=a.extend({},i.data,t.param),i.extra=a.extend({},i.extra,t.extra)),i)},impressionLog:function(e,t){e=this.makeLogParam("impression",e);this.submitLog(e,t)},clickLog:function(e){var t=a(e.currentTarget).attr("data-log-props"),t=this.makeLogParam("click",a.parseJSON(t));this.submitLog(t),e.stopPropagation()},clickLogWithoutEventParam:function(e){e=this.makeLogParam("click",e);this.submitLog(e)},latencyTrackLog:function(e,t){e=this.makeLogParam("latency",e);e.extra=a.extend({},e.extra,t),this.submitLog(e)},submitLog:function(e,t){return"B"===n.getAbTestOptionByKey("4250")&&"undefined"!=typeof CoupangWebLog&&!1!==e.meta.hasOwnProperty("schemaId")&&!1!==e.meta.hasOwnProperty("schemaVersion")&&void CoupangWebLog.submit(e,t)}});return i}),define("personalizedGW",["jquery","common/essentialData","common/adsplatform/ViewableImpressionLogger","HomeWebLogger","ads-components/dist/carousel","common/abtest/ABTestHelper"],function(l,e,c,u,d,m){var p="personalized_ads",g="trending_ads",h="decker-carousel",f="gw_promotion",y="jikgu_promotion";return{$widgetContainer:l("#personalizedGW"),impressionLogList:{},continuationToken:"",init:function(){this.fetchData(),this.initEvent()},fetchData:function(e){var t=this;l.ajax({url:"/np/recommend/feeds",dataType:"json",data:{nextFeedsToken:e}}).success(function(e){t.continuationToken=e.continuationToken;try{t.handleResponseData(e)}catch(e){}}).fail(function(){})},handleResponseData:function(e){if(this.checkExist(e))for(var t=this.$widgetContainer,n=0,i=e.feeds;n<i.length;n++){var o=i[n],a=o.feedId,s=n===i.length-1,r=p===o.type,c=g===o.type,d=y===o.type;isGwPromotionWidget=f===o.type,o.isAds=o.productLists&&o.productLists.length&&o.productLists[0].ads,r||c?o&&o.productLists&&3<=o.productLists.length&&this.renderDeckerCarousel(t,a,o,s):isGwPromotionWidget?this.renderGwPromotionWidget(t,a,o,s):d?this.renderJikguPromotionWidget(t,a,o,s):this.renderWidget(t,a,o,s)}},renderDeckerCarousel:function(e,i,t,n){var o,a,s=this,r=l("<div/>",{id:i,class:t.type+" carousel-widget-container "+[].join(" ")}).data({"carousel-feed-type":t.type});p===t.type?r.prependTo(e):r.appendTo(e),e.addClass("full-width"),o=r,a=t,coupangWebRequire(["common/components/dist/decker-carousel"],function(e){switch(s.checkWidgetInViewPort(i,t,n),o.on("decker-carousel.impression",function(e){l(".carousel-widget-container."+a.type).trigger("carousel."+a.type+".visible"),s.impressionLogList[i]=a.impressionLogging||{};var t=s.impressionLogList[i];t.widgetType=h,t.numVisibleItems=e.unitCount}),o.on("decker-carousel.item.click",function(e){e=l(e.target).data("clickLogging")||{};e.widgetType=h,u.clickLogWithoutEventParam({id:"click_personalized_gw",param:e})}),o.on("decker-carousel.nav.click",function(e){if(l(e.target).hasClass("next"))for(var t in s.impressionLogList){var n=s.impressionLogList[t];if(t===i){try{n.numVisibleItems=e.reachUnitCount}catch(e){}break}}}),a.type){case p:case g:new e(o,{pageSize:5,step:1}).render(a)}})},renderGwPromotionWidget:function(e,i,t,n){var o,a,s=this,r=l("<div/>",{id:i,class:t.type+" carousel-widget-container "+[].join(" ")}).data({"carousel-feed-type":t.type});r.appendTo(e),e.addClass("full-width"),o=r,a=t,coupangWebRequire(["common/components/dist/promotion-widget"],function(e){s.checkWidgetInViewPort(i,t,n),o.on("promotion-decker-carousel.impression",function(e){l(".carousel-widget-container."+a.type).trigger("carousel."+a.type+".visible"),s.impressionLogList[i]=a.impressionLogging||{};var t=s.impressionLogList[i];t.widgetType=f,t.numVisibleItems=e.unitCount}),o.on("promotion-decker-carousel.item.click",function(e){e=l(e.target).data("clickLogging")||{};e.widgetType=f,u.clickLogWithoutEventParam({id:"click_personalized_gw",param:e})}),o.on("promotion-decker-carousel.nav.click",function(e){if(l(e.target).hasClass("next"))for(var t in s.impressionLogList){var n=s.impressionLogList[t];if(t===i){try{n.numVisibleItems=e.reachUnitCount}catch(e){}break}}}),new e(o,{pageSize:5,step:1}).render(a)})},renderJikguPromotionWidget:function(e,i,t,n){var o,a,s,r,c=this,d=new m({testKey:"51291"});if("A"==d.getAbTestOptionByKey("51291"))return(a=l("<div/>",{id:i,class:t.type}).data({"carousel-feed-type":t.type})).appendTo(e),e.addClass("full-width"),o=a,coupangWebRequire(["common/components/dist/jikgu-widget-alog"],function(e){c.checkWidgetInViewPort(i,t,n),o.on("jikgu-group-a-empty-body.impression",function(e){d.loggingOnce()}),new e(o).render()}),!1;(a=l("<div/>",{id:i,class:t.type+" carousel-widget-container "+[].join(" ")}).data({"carousel-feed-type":t.type})).appendTo(e),e.addClass("full-width"),s=a,r=t,coupangWebRequire(["common/components/dist/jikgu-widget"],function(e){c.checkWidgetInViewPort(i,t,n),s.on("promotion-decker-carousel.impression",function(e){d.loggingOnce(),l(".carousel-widget-container."+r.type).trigger("carousel."+r.type+".visible"),c.impressionLogList[i]=r.impressionLogging||{};var t=c.impressionLogList[i];t.widgetType=y,t.numVisibleItems=e.unitCount}),s.on("promotion-decker-carousel.item.click",function(e){e=l(e.target).data("clickLogging")||{};e.widgetType=y,u.clickLogWithoutEventParam({id:"click_personalized_gw",param:e})}),s.on("promotion-decker-carousel.nav.click",function(e){if(l(e.target).hasClass("next"))for(var t in c.impressionLogList){var n=c.impressionLogList[t];if(t===i){try{n.numVisibleItems=e.reachUnitCount}catch(e){}break}}}),new e(s,{pageSize:5,step:1}).render(r)})},renderWidget:function(i,o,a,s){var r=this;coupangWebRequire(["fodiumWidgetLoader","page/common/alsoViewedProducts.hbs"],function(e,t){var n=l("#header").data("abShowFbi"),t=l(t({containerId:o,showFbi:n,feed:encodeURIComponent(JSON.stringify(a))}));t.addClass(a.type+" carousel-widget-container").data({"carousel-feed-type":a.type}),p===a.type?t.prependTo(i):t.appendTo(i),e.load(l(t),coupangWebRequire),t.on("widget.loaded",function(){r.checkWidgetInViewPort(o,a,s),r.registerClickEvent(o);for(var e=l(".recommend-widget__item"),i={},t=a.productLists,n=0;n<t.length;n++)i[t[n].vendorItemId]=t[n].adsViewableImpressionUrl;e.each(function(e,t){var n=i[t.getAttribute("data-vendor-item-id")];n&&(t.setAttribute("data-view-impression",n),new c(t,n))}),setTimeout(function(){new d({target:"#"+o}).init()},0)})})},checkExist:function(e){var t;return!(!e||(!(t=e.feeds)||!l.isArray(t)||0===t.length)&&(e.continuationToken&&this.fetchData(e.continuationToken),1))},checkWidgetInViewPort:function(t,n,i){var o=this;l(window).on("scroll."+t,function(){var e=document.getElementById(t).getBoundingClientRect();0<=e.top&&e.top<=l(window).height()&&(l(".carousel-widget-container."+n.type).trigger("carousel."+n.type+".visible"),o.handleImpressionLogData(t,n),i&&o.continuationToken&&o.fetchData(o.continuationToken),l(window).off("scroll."+t))}).trigger("scroll")},handleImpressionLogData:function(e,t){this.impressionLogList[e]=t.impressionLogging||{}},sendImpressionLog:function(e){u.impressionLog({id:"impression_personalized_gw",param:e},{isAsync:!1})},registerClickEvent:function(i){var o=this,e=l("#"+i);e.on("click",".recommend-widget__item a",function(e){e=l(e.currentTarget).data("clickLogging")||{};e.widgetType="",u.clickLogWithoutEventParam({id:"click_personalized_gw",param:e})}),e.on("click",".recommend-widget__arrow-button.next",function(){for(var e in o.impressionLogList){var t=o.impressionLogList[e],n=t.numVisibleItems||0;if(e===i&&n<15){t.numVisibleItems=n+5;break}}})},initEvent:function(){var t=this;window.onbeforeunload=function(){if(t.impressionLogList)for(var e in t.impressionLogList)t.sendImpressionLog(t.impressionLogList[e])}}}}),define("timeLog",["jquery","common/utils/perfTrack","HomeWebLogger"],function(n,i,o){function e(){setTimeout(function(){var e=i.getPageTimingData(),e={dns:e.dns,connect:e.connect,ttfb:e.ttfb,serverTime:e.serverTime,download:e.download,domReady:e.domReady,loadTime:e.loadTime,network:e.network,customCss:i.getResourceTimingData("/main_new.min.css"),customJs:i.getResourceTimingData("/home.js"),customImg:i.getResourceTimingData(n(".main-today__bg.today-bg0").attr("src")),ttiLoggerJs:i.getResourceTimingData("/tti-logger.min.js"),couLogJs:i.getResourceTimingData("/cou-log.min.js"),requireJs:i.getResourceTimingData(/\/require.+js/)},e=n.extend({},{id:"web_latency_track_log",param:e}),t=i.getResourceTimingDataObject(n(".main-today__bg.today-bg0").attr("src"));o.latencyTrackLog(e,t)},200)}return{timeLog:function(){performance&&performance.timing&&(performance.timing.loadEventEnd?e():n(window).load(function(){e()}))}}}),define("viewedAndRelatedProduct",["jquery","common/template/urlBuilder","common/utils/stringUtils","common/baseAction","home/rocketBadge","common/essentialData"],function(o,t,a,s,r,c){"use strict";var d="#latestViewedProducts",n="#latestViewedProducts .latest-viewed-product",l="#latestViewedProducts .latest-viewed-recommendation",u="#recommend_",i={el:{$viewedWrapper:"",$viewedProductList:""},init:function(){var e=this;o(n).hide(),i.getViewedProduct().done(function(){e.el.$viewedWrapper=o(n),e.el.$viewedProductList=e.el.$viewedWrapper.find("li"),e.bindMouseOverEvent(),e.bindListClickEvent(),e.bindRollingBtnClickEvent(),e.bindDeleteBtnClickEvent(),o(i.el.$viewedProductList.not(":hidden")[0]).trigger("click")})},getViewedProduct:function(){return o.ajax({type:"GET",contentType:"text/html",url:t.buildRequestUrl("/np/home/recently-viewed"),beforeSend:function(){o(d).html('<div class="loading-noti-area_"><p class="loading-noti">Loading...</p></div>')},complete:function(){o(".loading-noti-area_").remove()},success:function(e){i.showViewedProduct(e)},error:function(){o(d).remove()}})},showViewedProduct:function(e){e?o(d).show():o(d).remove(),o(d).append(e),s.slide_home({slider:o(".latest-viewed-product"),size:4})},bindMouseOverEvent:function(){this.el.$viewedWrapper.on({mouseenter:function(){4<i.el.$viewedProductList.size()&&o(this).children("a.move").show()},mouseleave:function(){o(this).children("a.move").hide()}})},bindListClickEvent:function(){this.el.$viewedWrapper.on("click","li",function(){var e=o(this),t=o(i.el.$viewedProductList.not(":hidden")).index(this);e.hasClass("on")||(e.siblings().removeClass("on"),m.getRecommendProduct(e.attr("class"),"PRODUCT"===e.data("producttype"),t),e.addClass("on"))})},bindRollingBtnClickEvent:function(){this.el.$viewedWrapper.on("click","a.move",function(){o(i.el.$viewedProductList.not(":hidden")[0]).trigger("click")})},bindDeleteBtnClickEvent:function(){o(".latest-viewed-item-delete").on("click",function(e){e.preventDefault();e=o(this).data("productid");o.ajax({type:"DELETE",url:t.buildRequestUrl("/np/home/remove-recently-viewed?productId="+e),dataType:"text",cache:!1,context:this,xhrFields:{withCredentials:!0},success:function(e){i.init()},error:function(e){alert(Pacifik.formatMessage("coupang.web.ff1379","삭제가 안됐나요? 다시 한번 해보세요."))}})})}},m={getRecommendProduct:function(t,e,n){var i=o(u+t);i.length?(o(l).hide(),i.show()):o.ajax({type:"GET",url:"/np/recentlyViewedProducts/"+t+"/relatedProducts",dataType:"HTML",data:{isProduct:e,pivot:n},success:function(e){a.trim(e)&&m.showRecommendProduct(e,t)},error:function(){}})},showRecommendProduct:function(e,t){o(l).hide(),o(d).append(e),s.slide_home({slider:o(u+t),size:5}),"B"===c.getAbTestOptionByKey("2449")&&new r(o(u+t));var n=o(e).find("a.product").data("recommendationlog1"),i="",t=(o(e).find("a.product").each(function(e){0==e?i=o(this).data("recommendationlog2"):null!=o(this).data("recommendationlog2")&&(i=i+","+o(this).data("recommendationlog2"))}),{eventAction:"exposure",rmdValue:i}),e={logCategory:"impression",logType:"",logLabel:"home",customURL:"recommendationInflow.pang",extraParam:n+"&"+o.param(t)};couLog.execManualLogging(e),o(".latest-viewed-recommendation a.product").click(function(){var e={eventAction:"click",rmdValue:o(this).data("recommendationlog2")},e={logCategory:"event",logType:"click",logLabel:"home",customURL:"recommendationInflow.pang",extraParam:n+"&"+o.param(e)};couLog.execManualLogging(e)})},bindEvent:function(){o(d).on({mouseenter:function(){var e=o(this);5<e.find("li").length&&e.children("a.move").show()},mouseleave:function(){o(this).children("a.move").hide()}},".latest-viewed-recommendation")}};return function(){i.init(),m.bindEvent()}}),define("wideTodaysHot",["jquery","weblog","HomeWebLogger"],function(s,e,r){return{config:{rollingTimer:"",rollingSpeed:2e3,selectedSpeed:2e3,size:0},container:"",item:"",c1BannerIdsCollects:[],index:0,today:function(e,t,n,i,o){var a=this;this.container=s(e).find("ul"),this.item=s(this.container).find("li"),this.index=this.item.index(s(".today-selected")),this.config.size=s(this.item).size(),this.config.speed=n,this.config.selectedSpeed=i,this.config.rolling=t,this.config.rollingSpeed=this.config.speed,s(this.container).find(".mask").on("mouseover",s.proxy(function(e){var t,e=s(e.target).closest(".todayshot-right-thumbnail");0===e.size()||e.hasClass("today-selected")||(a.index=e.index(),a.item.removeClass("today-selected"),a.changeImage(a.index),e.hasClass("today-selected")||e.addClass("today-selected"),(e=e.find("a").data("log-props"))&&(t=e.bannerId||this.index,0<this.config.size)&&-1==this.c1BannerIdsCollects.indexOf(t)&&(r.impressionLog({id:e.impressionId,extra:e.extra,param:e.param},{isAsync:!0}),this.c1BannerIdsCollects.push(t)))},this)),this.config.rolling&&(!o||"true"===s(e).attr("c1-images-loaded")?this.handlingRolling():s(e).on("c1-images-loaded",function(){a.handlingRolling()}))},handlingRolling:function(){var t=this;this._rollingHandled||(s(".main-today__selected-product").on({mouseover:function(e){t.rollingFn("stop"),t.config.rollingSpeed=t.config.selectedSpeed,t.rollingFn("start")},mouseout:function(e){t.rollingFn("stop"),t.config.rollingSpeed=t.config.speed,t.rollingFn("start")}}),t.rollingFn("start"),this._rollingHandled=!0)},setImageSrc:function(){this.container.find("img").attr("src",function(){return s(this).data("imgsrc")})},buttonFunc:function(e){"next"===e?(this.index++,this.index>this.config.size-1&&(this.index=0)):(this.index--,this.index<0&&(this.index=this.config.size-1));var t,e=s(this.item),n=e.eq(this.index),i=n.find("a").data("log-props");i&&(t=i.bannerId||this.index,0<this.config.size)&&this.c1BannerIdsCollects.length<this.config.size&&-1==this.c1BannerIdsCollects.indexOf(t)&&(this.c1BannerIdsCollects.push(t),r.impressionLog({id:i.impressionId,extra:i.extra,param:i.param},{isAsync:!0})),e.removeClass("today-selected"),n.addClass("today-selected"),this.changeImage(this.index)},rollingFn:function(e){var t=this;"start"===e?this.config.rollingTimer=setInterval(function(){t.buttonFunc("next")},this.config.rollingSpeed):clearInterval(this.config.rollingTimer)},changeImage:function(e){var t=s(".main-today__img-container a"),n=s(".main-today>img");t.hide(),n.hide(),s(t[e]).show(),s(n[e]).show()}}}),define("wowFeeChangePopup",["jquery","lodash","common/utils/cookieUtils"],function(o,e,t){var n="",a=o("#wowFeeChangePopup"),s=a.data()||{},i=s.wowFeeChangePopup&&s.wowFeeChangePopup.initialServerDateTime-(new Date).getTime()||0,r=!1,c=s.wowFeeChangePopup&&s.wowFeeChangePopup.abOption||"",d=s.wowFeeChangePopup&&s.wowFeeChangePopup.wowFeeChangePilotV2||"A",l=s.wowFeeChangePopup&&s.wowFeeChangePopup.tracking||!1,u=t.getValue("member_srl"),m="",p="",g="",h={renderBenefitPopup:function(){coupangWebRequire(["page/loyalty/wowFeeChange/benefitPopup.hbs"],function(e){y.udpateLastAcknowledgeTime(),w.agreeOrDecideLaterClickLog("decide_later",!0);e=o(e(s));a.html(e)})},renderLoyaltyAgreementPopup:function(){coupangWebRequire(["page/loyalty/wowFeeChange/loyaltyAgreementPopup.hbs"],function(e){e=o(e(s));a.html(e)})},renderNoticePopup:function(i){coupangWebRequire(["page/loyalty/wowFeeChange/noticePopup.hbs"],function(e){var t=JSON.parse(JSON.stringify(s.wowFeeChangePopup||{})),n=(t.showStaticBenefits="C"===c||"F"===c,t.placeDecideLaterButtonOnBottom="D"===c,"A"===d||"NOT_APPLICABLE"===d),n=(t.placeDecideLaterButtonOnBottomV2=n?t.placeDecideLaterButtonOnBottom:"F"===d,t.showStaticBenefitsV2=n?t.showStaticBenefits:"E"===d,t.showNewRocketDeliveryImage=~"CDF".indexOf(d),t.showNewToolTip=~"CDEF".indexOf(d),t.changeBackground="D"===d,o(e(t)));a.show(),a.html(n),h.initializeBenefitsSwiper(),h.bindEvent(),f.disablePageScroll(),i&&w.noticePopupImpressionLog()})},initializeBenefitsSwiper:function(){var e=0<o(".benefits_display_in_static").length;"function"!=typeof Swiper||e||(new Swiper(".swiper-container",{slidesPerView:1,centeredSlides:!0,grabCursor:!0,loop:!0,speed:500,autoplay:{delay:2e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},on:{touchStart:function(){y.udpateLastAcknowledgeTime(),n=o(".swiper-slide-active").data("benefitType")},touchEnd:function(){var e=o(".swiper-slide-active").data("benefitType");n&&e!==n&&w.benefitSwipeAndClickLog(n,e),n=""},transitionEnd:function(){f.updateBenefitTypeForWeblog()}}}),f.updateBenefitTypeForWeblog())},bindEvent:function(){o(window).off("message").on("message",function(t){t=t.originalEvent.data;try{action=o.isPlainObject(t)&&t.type?t:JSON.parse(t)}catch(e){action={type:t}}"frame.close"===action.type?h.renderNoticePopup():"closeWowPopup"===action.type&&h.closePopup()}),o("#loyalty-fee-change-decide-later-button").on("click",function(){r||(s.wowFeeChangePopup&&"B"===s.wowFeeChangePopup.tcWowDecideLater?(y.udpateLastAcknowledgeTime(),w.agreeOrDecideLaterClickLog("decide_later",!0),v.handleClickDecideLaterButton({success:function(e){e.result?h.closePopup():f.showNetworkErrorAlert(e.isAgreedBefore)},fail:function(){f.showNetworkErrorAlert()}})):(l&&v.addTracking(),h.renderBenefitPopup()))}),o("#loyalty-fee-change-agree-button").on("click",function(){r||(r=!0,y.udpateLastAcknowledgeTime(),v.agreeWowFeeChange({success:function(e){e.result?(y.udpateDisableWowMembershipAgreement(),w.agreeOrDecideLaterClickLog("agree",!0),h.closePopup()):f.showNetworkErrorAlert(e.isAgreedBefore)},fail:function(){f.showNetworkErrorAlert(!1)}}))}),o("#loyalty-fee-change-show-tnc-button").on("click",function(){w.checkAgreementClickLog(),y.udpateLastAcknowledgeTime(),h.renderLoyaltyAgreementPopup()}),o(".swiper-prev").on("click",function(){y.udpateLastAcknowledgeTime(),w.benefitSwipeAndClickLog(p,m)}),o(".swiper-next").on("click",function(){y.udpateLastAcknowledgeTime(),w.benefitSwipeAndClickLog(p,g)})},closePopup:function(){f.enablePageScroll(),a.remove()}},f={effectiveDateAndSavingAmount:null,enablePageScroll:function(){o("html").css("overflow-y","scroll")},disablePageScroll:function(){o("html").css("overflow-y","hidden")},getFormattedEffectiveDate:function(e){var o,a;return e?(o=(new Date).getFullYear(),a=function(e){return e.replace(/^(\d)$/,"0$1")},e.replaceAll(/(\d+)월\s*(\d+)일/gi,function(e,t,n,i){return o+a(t)+a(n)})):""},getEffectiveDateAndSavingAmount:function(){var e,t,n;return this.effectiveDateAndSavingAmount||(e=this.getFormattedEffectiveDate(o(".wow-fee-change-popup-notice-popup").data("effectiveDate")),n=-1,(t=o(".loyalty-fee-change-contents__carousel-description")).length&&t.data("budAmount")&&(n=t.data("budAmount")),this.effectiveDateAndSavingAmount={effectiveDate:e,savingAmount:n}),this.effectiveDateAndSavingAmount},showNetworkErrorAlert:function(e){var t=o("#network-error"),n=o("#already-agree-error");(e?(o(".wow-fee-change-popup-error-alert-mask-already-agree").show(),n):(o(".wow-fee-change-popup-error-alert-mask").show(),t)).find(".error-mask-close-btn").off("click").on("click",function(){h.closePopup()}),e?w.sendAlreadyAgreedLog():w.agreeRequestFailureAlertImpressionLog()},updateBenefitTypeForWeblog:function(){m=o(".swiper-slide-prev").data("benefitType"),p=o(".swiper-slide-active").data("benefitType"),g=o(".swiper-slide-next").data("benefitType")}},y={udpateLastAcknowledgeTime:function(){var e=(new Date).getTime();t.setCookie("gwFeeChangeLastAckDateTime_"+u,e+i,{timeUnit:"MONTH",timeValue:1}),t.setCookie("globalLastAcknowledgeTime_"+u,e+i,{timeUnit:"MONTH",timeValue:1})},udpateDisableWowMembershipAgreement:function(){t.setCookie("wowAgreementAgreed_"+u,"true",{timeUnit:"MINUTE",timeValue:1})}},w={submitLog:function(e){CoupangWebLog&&CoupangWebLog.submit(e)},sendABExposureLog:function(e,t){this.submitLog({meta:{schemaId:13452,schemaVersion:1},data:{domain:"home",pageName:"home",eventName:"ab_test_exposure",logCategory:"impression",logType:"impression",abGroup:e,abTestId:t||"54933"}})},agreeOrDecideLaterClickLog:function(e,t){var n=f.getEffectiveDateAndSavingAmount(),e={domain:"home",pageName:"home",eventName:"home_wow_agreement_popup_cta_click",logCategory:"event",logType:"click",clickType:e,effectiveDate:n.effectiveDate,personalSavingsAmount:n.savingAmount,benefitType:p,isSubmitSuceed:t?"Y":"N"};this.submitLog({meta:{schemaId:14115,schemaVersion:1},data:e})},checkAgreementClickLog:function(){var e=f.getEffectiveDateAndSavingAmount(),e={domain:"home",pageName:"home",eventName:"home_wow_agreement_popup_other_click",logCategory:"event",logType:"click",clickType:"terms_conditions",effectiveDate:e.effectiveDate,personalSavingsAmount:e.savingAmount};this.submitLog({meta:{schemaId:14116,schemaVersion:1},data:e})},benefitSwipeAndClickLog:function(e,t){var n=f.getEffectiveDateAndSavingAmount(),n={domain:"home",pageName:"home",eventName:"home_wow_agreement_popup_benefit_swipe_click",logCategory:"event",logType:"click",effectiveDate:n.effectiveDate,personalSavingsAmount:n.savingAmount,currentBenefitType:e,postBenefitType:t};this.submitLog({meta:{schemaId:14136,schemaVersion:1},data:n})},noticePopupImpressionLog:function(){var e=f.getEffectiveDateAndSavingAmount(),e={domain:"home",pageName:"home",eventName:"home_wow_agreement_popup_impression",logCategory:"impression",logType:"impression",effectiveDate:e.effectiveDate,personalSavingsAmount:e.savingAmount};this.submitLog({meta:{schemaId:14114,schemaVersion:1},data:e}),this.sendABExposureLog(c),this.sendABExposureLog(d,"56740")},agreeRequestFailureAlertImpressionLog:function(){this.submitLog({meta:{schemaId:14195,schemaVersion:1},data:{domain:"home",pageName:"home",eventName:"home_wow_agreement_normal_api_failure_alert_impression",logCategory:"impression",logType:"impression"}})},sendAlreadyAgreedLog:function(){var e=f.getEffectiveDateAndSavingAmount();CoupangWebLog.submit({meta:{schemaId:14197,schemaVersion:1},data:{domain:"loyalty",logCategory:"impression",logType:"impression",pageName:"wow_agreement_landing",eventName:"loyalty_wow_agreement_already_agreed_alert_impression",effectiveDate:e.effectiveDate,personalSavingsAmount:e.savingAmount,wowConsentOptionType:"agree_or_decide_later",titleType:"agree"}})}},v={agreeWowFeeChange:function(t){var e={agreed:!0,sourcePage:"HOME"};l&&(e.subPage="POPUP"),o.ajax({url:"/vp/notice/wow-fee-change/agreement",type:"POST",cache:!1,data:e,success:function(e){t.success&&t.success(e)},error:function(){t.fail&&t.fail()}})},handleClickDecideLaterButton:function(t){var e={sourcePage:"HOME"};l&&(e.subPage="POPUP"),o.ajax({url:"/vp/notice/wow-fee-change/decide-later",type:"POST",cache:!1,data:e,success:function(e){t.success&&t.success(e)},error:function(){t.fail&&t.fail()}})},addTracking(){o.ajax({url:"/vp/notice/tracking",type:"GET",cache:!1,data:{subPage:"POPUP",sourcePage:"HOME",action:"CLICK_DECIDE_LATER"}})}};return{initialize:function(){"A"===c?w.sendABExposureLog(c):a.length&&h.renderNoticePopup(!0)}}}),define("wowSignupPopup",["jquery"],function(i){var o=i("#wowSignupPopup"),a=o.data(),s=i("#basemembersrl").data("basemembersrl")+"wow-signup-popup",r=null;return{initialize:function(){var e,t,n;0<o.length&&a.wowSignUpCxUrl&&function(e){try{var t,n=window.localStorage.getItem(e);return!n||(t=JSON.parse(n).data).expire&&Date.now()>t.expire}catch(e){}}(s)&&(n=i("#wowSignupPopup > iframe"),t=n,n=a,o.show(),t.on("load",function(){var i;i=t,window.addEventListener("message",function(e){var t=null;if("https://loyalty.coupang.com"===e.origin)switch((t=JSON.parse(e.data)).type){case"frame.close":return void(r?setTimeout(function(){r.close(),r=null},100):o.hide());case"frame.change.size":var n=t.payload.delay||0;return void setTimeout(function(){t.payload.width&&i.width(t.payload.width),t.payload.height&&i.height(t.payload.height)},n);case"frame.open.tnc":return void(r=window.open("https://loyalty.coupang.com/loyalty/sign-up/agreement/index","tncPopup","left=100,top=100,width=404,height=697"));case"frame.go.to":return void(t.payload.url&&(window.location.href=t.payload.url));case"location.href":return void o.hide();case"register.success":o.hide()}else"https://rocketpay.coupang.com"===e.origin&&"closeRocketpay"===(t=e.data)&&o.hide()})}),t.attr("src",n.wowSignUpCxUrl),n=s,(e=new Date).setDate(e.getDate()+14),window.localStorage.setItem(n,JSON.stringify({data:{expire:e.getTime()}})))}}}),define("commonUtils",function(){return{getUrlParameters:function(e){var n,i={};return e&&(e=0<=(n=(e=0<=(n=e.indexOf("?"))?e.substr(n+1):e).indexOf("#"))?e.substr(0,n):e)&&e.split("&").forEach(function(e){var t=0<=(n=e.indexOf("="))?e.substr(0,n):e,e=0<=n?e.substr(n+1):"";0<t.length&&(i[t]=e)}),i},getProductId:function(e){return(e=/.+\bproducts\/(\d+)\?/gi.exec(e))[1]?parseInt(e[1],10):0}}});