define(["jquery","couLog","common/essentialData","common/helper/defaultHelper","common/abtest/ABTestHelper","common/baseAction","home/rocketBadge","home/home","common/utils/browserChecker","common/adsplatform/adsplatformLogger","weblog"],function($,couLog,essentialData,helper,ABTestHelper,baseAction,rocketBadge,home,browserChecker,adsplatformLogger,CoupangWebLog){if(essentialData.getAbTestOptionByKey("4250")==="B"){CoupangWebLog.init({"platform":"web","service":"coupang","mode":essentialData.getProfile()===
""||essentialData.getProfile()==="production"?"production":"test","useAutoSendPageViewLog":false});window.CoupangWebLog=CoupangWebLog;coupangWebRequire(["HomeWebLogger"],function(HomeWebLogger){HomeWebLogger.bindClickLogEventHandler()});CoupangWebLog.submit({"data":{"domain":"home","logCategory":"view","logType":"page","pageName":"home_today_recommendation"},"meta":{"schemaId":375,"schemaVersion":1}});coupangWebRequire(["timeLog"],function(timeLog){timeLog.timeLog()})}coupangWebRequire(["wideTodaysHot",
"HomeWebLogger"],function(wideTodaysHot,HomeWebLogger){var lazyLoadC1=essentialData.getAbTestOptionByKey("10267")==="B";wideTodaysHot.today(".main-today",true,2E3,7E3,lazyLoadC1);var todayshotCategory=$(".main-today__img-container").data("display-category");couLog.execManualLogging({"logCategory":"impression","logType":"","logLabel":"todayshot","grp":"Todayshot","category":todayshotCategory})});new adsplatformLogger($(".main-today__img-container"),false);new adsplatformLogger($(".main-today--thumb-nails li"),
true);new adsplatformLogger($(".discovery-list ul li"),false);new rocketBadge($("#todayDiscoveryUnit"));coupangWebRequire(["wowSignupPopup"],function(wowSignupPopup){wowSignupPopup.initialize()});coupangWebRequire(["wowFeeChangePopup"],function(wowFeeChangePopup){wowFeeChangePopup.initialize()});coupangWebRequire(["disagreeRegainFeeChangePopup"],function(disagreeRegainFeeChangePopup){disagreeRegainFeeChangePopup.initialize()});coupangWebRequire(["disagreeRegainFeeChangeSecondPopup"],function(disagreeRegainFeeChangeSecondPopup){disagreeRegainFeeChangeSecondPopup.initialize()});
coupangWebRequire(["disagreeRegainFeeChangeThirdPopup"],function(disagreeRegainFeeChangeThirdPopup){disagreeRegainFeeChangeThirdPopup.initialize()});coupangWebRequire(["disagreeRegainPermanentPopup"],function(disagreeRegainPermanentPopup){disagreeRegainPermanentPopup.initialize()});if(essentialData.getAbTestOptionByKey("5045")==="B")coupangWebRequire(["personalizedGW"],function(personalizedGW){personalizedGW.init()});coupangWebRequire(["couponExpirationReminder"],function(couponExpirationReminder){couponExpirationReminder.init()});
coupangWebRequire(["homeUnit","CategoryBest","viewedAndRelatedProduct","homeRollingBanner","homeRightSideBar"],function(homeUnit,CategoryBest,viewedAndRelatedProduct,homeRollingBanner,HomeRightSideBar){function cartRecommend(homeUnit,baseAction,duplicateProductIds){homeUnit.init($("#cartUnit"),"CART_RECOMMEND",duplicateProductIds,function(){baseAction.slide_home({slider:$(".main-cart"),size:5})},{sort:true})}function categoryBest(homeUnit,CategoryBest,duplicateProductIds){homeUnit.init($("#categoryBestUnit"),
"BEST_CATEGORY",duplicateProductIds,function(){new CategoryBest(function(){categoryBest(homeUnit,CategoryBest,duplicateProductIds)})},{category:$("#categoryBestUnit").data("categories")})}function lineBanner(homeUnit,baseAction,duplicateProductIds){homeUnit.init($("#homeContentsBanner"),"LINE_BANNER",duplicateProductIds,function(){new homeRollingBanner("#homeContentsBanner",".contentsBannerArea","banner-active",3E3);new adsplatformLogger($(".contentsBannerArea ul li"),false)})}var duplicateProductIds=
$("#duplicateProductIds").data("duplicateproductids")+"";lineBanner(homeUnit,baseAction,duplicateProductIds);cartRecommend(homeUnit,baseAction,duplicateProductIds);new HomeRightSideBar("#side-bar",{stickRefSelector:"#todayDiscoveryUnit .today-discovery",departRefSelector:"#categoryBestUnit"});var scrollCheck=function(){var currentScroll=$(window).scrollTop(),offset=$("#todayDiscoveryUnit").offset(),startLocation=offset&&offset.top;if(currentScroll>=startLocation){categoryBest(homeUnit,CategoryBest,
duplicateProductIds);$(window).off("scroll.category")}};$(window).on("scroll.category",scrollCheck).trigger("scroll");viewedAndRelatedProduct()});$(document).ready(function(){if(browserChecker.isMobile())$("#side-bar").hide();var homeContents={},targetClass=$(".reach-ratio-wrap"),unitCount=targetClass.length-1,lastUnit=targetClass[unitCount].id,userViewedUnit=targetClass[0].id,clientHeight=browserChecker.clientHeight(),scrollTop=$(window).scrollTop(),currentImp=scrollTop+clientHeight,categoryBestUnitHeight=
600;targetClass.each(function(i,el){homeContents[el.id]={bottom:$(el).offset().top+$(el).height()}});if(typeof homeContents["categoryBestUnit"]!=="undefined"){if(clientHeight<categoryBestUnitHeight)categoryBestUnitHeight=clientHeight;homeContents["categoryBestUnit"].bottom=homeContents["categoryBestUnit"].bottom+categoryBestUnitHeight}$(window).on("scroll.reach-ratio",function(){for(var i in homeContents){var contentBottom=homeContents[i].bottom;if(contentBottom<=currentImp&&contentBottom>homeContents[userViewedUnit].bottom){userViewedUnit=
i;if(i===lastUnit)$(window).off("scroll.reach-ratio")}}});try{var ttiExtra={"protocol":location.protocol};if(window.performance&&$.isFunction(window.performance.getEntriesByType)){var performanceNavigationTiming=window.performance.getEntriesByType("navigation");if(performanceNavigationTiming&&performanceNavigationTiming.length>0)ttiExtra.navigationTiming=performanceNavigationTiming[0]}if(window.tti&&$.isFunction(window.tti.setExtra))window.tti.setExtra(ttiExtra)}catch(e){}$(window).on("unload",function(){couLog.execManualLogging({"logCategory":"event",
"logType":"scroll","logLabel":"home","viewGrp":userViewedUnit})})})});